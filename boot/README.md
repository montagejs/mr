
These files serve several purposes, all related to booting the Mr module
loader in development or production.  A build processes composes some of
them to make the `<script>` `mr/boot.js`, used in browsers while a
project is in development.  The same tool composes them to form the
header of a bundle of modules in production.  They are not necessary for
booting a module system in Node.js.

By way of background, the `mr/build.js` is capable of creating a kind of
module bundle that supports a very limited subset of Mr’s features.
Since a lot of Mr’s bootstrapping internals themselves are modular and
reusable, it’s necessary to use `build.js` to generate `boot.js` to fix
the chicken-and-egg problem.

A `mr` bundle can only link modules through `require` and `exports` and
embeds the entire working set of modules from a particular entry point.
It is largely inspired by the bundle format generated by [Browserify][].
The bundle starts with a bit of boilerplate.  The boilerplate is a
function expression that accepts a highly compact array of pre-analyzed
[dependency, factory] pairs, provides linkage, and returns the exports
of the first module.  `build.js` concatenates a function call with the
module payload, such that the expression as a whole evaluates to the
exports of the first module, suitable for chaining.

[Browserify]: https://github.com/substack/node-browserify

The chaining is significant because in `boot.js`, the entry module,
`boot/browser.js`, returns a function that accepts an optional
asynchronous bundle preloading completion promise and returns a promise
for when bootstrapping has completed.  The build script adds `().done()`
to the end of the expression to call this function without a preloading
plan and surface any asynchronous errors that might have occurred during
bootstrapping.

Mop builds on this, using `boot/preload-entry.js` as an entry
point.  `boot/browser.js` is reused as a module.  The preloader entry
module returns a function that accepts a preloading plan, generated by
Mop.  The preloading plan is an array of arrays of bundle file names to
load with script injection.  `boot/preload.js` exports a function that
takes the plan, injecting each of these scripts at their proper times,
and returning a promise for the completion of preloading.  That gets
passed into the `boot/browser.js` function.  `boot/preload-entry.js`
forwards the bootstrapping promise to its caller.  Mop thus has to
construct a bundle that has `boot/boilerplate.js`, followed by a Mr
bundle using the `boot/preload-entry.js` entry point, followed by a
function invocation with the preloading plan, followed by `.done()` to
surface any asynchronous errors from the combined operation.

-   `boilerplate.js`

    This is a header for `../boot.js`, `preload-boilerplate.js`, and any
    other `<script>` generated by `../build.js`.  It is a function
    expression that should be invoked with an array of module and
    linkage information.  The function returns the exports of the first
    module.  

-   `browser.js`

    This is the entry module for the `../boot.js` script for use during
    development.  It is also used as a module for production bundles
    generated by Mop.  It exports a single function that reads
    parameters and location data from the `<script>` tag that includes
    it, sets up a module loader, and asynchronously loads an executes an
    entry module, returning a promise for the exports.

-   `preload-entry.js`

    This is the entry module for the `../preload-boilerplate.js`.  It is
    a thin wrapper that harnesses the `browser.js` bootstrapper and the
    `preload.js` Mop bundle preloader.
    
-   `preload-boilerplate.js`

    This file is built by `npm run build` or `npm run build-preload`,
    using `../build.js` using `preload-entry.js` as an entry point.
    Mop, which itself is a more sophisticated variant of `../build.js`,
    uses this header to create self-executing module bundles for
    production use of Mr applications.

-   `preload.js`

    This module accepts a module preloading plan, an array of arrays of
    script URL’s, injects those scripts into the page in phases, and
    returns a promise when all of those scripts have registered that
    they have been loaded.  It uses a global `bundleLoaded` hook that
    occurs at the end of every bundle generated by Mop to notice when
    each of the scripts finishes loading.

    This module is used both for Mr’s boilerplate and Montage’s
    boilerplate.

-   `script-injection.js`

    This is a utility for injecting `<script>` tags in the browser.

-   `script-params.js`

    This module exports a single function that searches the DOM for the
    `<script>` that included `boot.js`, a preloading bundle, or the
    boot script from Montage, `montage.js`.  It is used in production
    bundles generated by Mop for both Mr and Montage.  It is not used
    during development.

-   `../boot.js`

    This is a `<script>` generated by `npm run build` or `npm run
    build-boot`, using `browser.js` as an entry-point, which can
    bootstrap a module system for a developer envirionment.

